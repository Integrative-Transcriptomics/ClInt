params.qc = "fastp" // Available Options: fastp, TrimGalore, FastQC (requires own trimming)
params.mapping = "hisat2" // Available Options: hisat2, star
params.assembly = ["Trinity","rnaspades"] // Available Options (choose multiple): STAR, Trinity, RNAspades,
params.quantification = "featureCounts" // Available Options: featureCounts (none other available at the moment)

params.trinity_type="guided" // Available options: guided, denovo

// Whether or not to publish directories to allow them to be viewed (mainly for debugging files)
PUBLISH_DIRECTORIES = 0

// Set some global variables which require linux-based commands. Can also set manually if these are known prior
params.USER_ID = "id -u".execute().text.trim()
params.GROUP_ID = "id -g".execute().text.trim()

params.input_reads_path = '';  // Folder of origin
params.input_reads = "${params.input_reads_path}/*.f*q.gz"; // Matches regex
params.output_dir = "./workflow_output"; // Where to publish files i.e VCFs
params.reference_file = ''; 
params.gff_file = '';
params.num_threads = 4; 
params.max_memory = '8.GB';


// https://github.com/nextflow-io/nextflow/issues/2786


profiles {
	singularity {
		process.container = 'file://clint.sif'
		singularity {
			enabled = true
			autoMounts = true
		//	envWhitelist = ['SINGULARITY_TMPDIR', 'SINGULARITY_CACHEDIR', 'SINGULARITYENV_TMP', 'SINGULARITYENV_TMPDIR', 'TMP', 'TMPDIR']
		}
	docker {
		// Causes errors when doing 'publishDir' related stuff due to permissions
		process.container = 'clint/clint'
		docker {
			enabled = true
			temp = 'auto'
		}
        withName: FASTP {
                cpus = 4
        }
        withName: HaplotypeCaller {
                cpus = 4
        }
        withName: HISAT2 {
                cpus = 4
        }
        withName: HISAT_BUILD {
                cpus = 4
        }
        withName: MarkDuplicates {
                cpus = 4
        }
        withName: MUSIAL {
                cpus = 4
        }
        withName: REFERENCE_HELP_FILES {
                cpus = 4
        }
        withName: RNASpades {
                cpus = 4
        }
        withName: SAMTOOLS_SORT {
                cpus = 4
        }
        withName: SplitNCigarReads {
                cpus = 4
        }
        withName: STAR {
                cpus = 4
        }
        withName: STAR_BUILD {
                cpus = 4
        }
        withName: TRINITY_DENOVO {
                cpus = 4
        }
        withName: TRINITY_GUIDED {
                cpus = 4
        }
	}
}

